2025-08-17 21:25:36.337 +03:00 [INF] User profile is available. Using 'C:\Users\User\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2025-08-17 21:25:37.250 +03:00 [INF] Now listening on: https://localhost:7224
2025-08-17 21:25:37.255 +03:00 [INF] Now listening on: http://localhost:5184
2025-08-17 21:25:37.392 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2025-08-17 21:25:37.489 +03:00 [INF] Hosting environment: Development
2025-08-17 21:25:37.494 +03:00 [INF] Content root path: C:\Users\User\Downloads\OrderApp-main\OrderApp-main\OrderManagement.API
2025-08-17 21:25:41.916 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7224/ - null null
2025-08-17 21:25:42.557 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7224/ - 404 0 null 654.0658ms
2025-08-17 21:25:42.650 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET https://localhost:7224/, Response status code: 404
2025-08-17 21:25:45.380 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7224/_framework/aspnetcore-browser-refresh.js - null null
2025-08-17 21:25:45.390 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7224/_vs/browserLink - null null
2025-08-17 21:25:45.434 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7224/_framework/aspnetcore-browser-refresh.js - 200 16523 application/javascript; charset=utf-8 54.1036ms
2025-08-17 21:25:45.522 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7224/_vs/browserLink - 200 null text/javascript; charset=UTF-8 131.8414ms
2025-08-17 21:25:45.934 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7224/swagger/v1/swagger.json - null null
2025-08-17 21:25:45.970 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7224/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 36.2956ms
2025-08-17 21:26:01.940 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7224/api/Auth/login - application/json 48
2025-08-17 21:26:01.969 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.AuthController.Login (OrderManagement.API)'
2025-08-17 21:26:02.109 +03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(OrderManagement.Domain.DTO.LoginDTO) on controller OrderManagement.API.Controller.AuthController (OrderManagement.API).
2025-08-17 21:26:02.992 +03:00 [INF] Login attempt for user: admin
2025-08-17 21:26:04.167 +03:00 [INF] User 'admin' found. Verifying password...
2025-08-17 21:26:04.342 +03:00 [INF] User 'admin' successfully authenticated
2025-08-17 21:26:04.426 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:26:04.443 +03:00 [INF] Executed action OrderManagement.API.Controller.AuthController.Login (OrderManagement.API) in 2311.0868ms
2025-08-17 21:26:04.451 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.AuthController.Login (OrderManagement.API)'
2025-08-17 21:26:04.459 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7224/api/Auth/login - 200 null application/json; charset=utf-8 2518.2747ms
2025-08-17 21:26:49.471 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7224/api/Item/create - application/json 90
2025-08-17 21:26:49.627 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.ItemController.CreateItem (OrderManagement.API)'
2025-08-17 21:26:49.641 +03:00 [INF] Route matched with {action = "CreateItem", controller = "Item"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] CreateItem(OrderManagement.Domain.DTO.CreateItemDTO) on controller OrderManagement.API.Controller.ItemController (OrderManagement.API).
2025-08-17 21:26:49.664 +03:00 [INF] Creating new item: strawberries
2025-08-17 21:26:49.922 +03:00 [INF] Executing OkObjectResult, writing value of type 'OrderManagement.Domain.Common.Response`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:26:49.979 +03:00 [INF] Executed action OrderManagement.API.Controller.ItemController.CreateItem (OrderManagement.API) in 332.5445ms
2025-08-17 21:26:49.983 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.ItemController.CreateItem (OrderManagement.API)'
2025-08-17 21:26:49.988 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7224/api/Item/create - 200 null application/json; charset=utf-8 564.2097ms
2025-08-17 21:27:01.624 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7224/api/Stock/all - null null
2025-08-17 21:27:01.638 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.StockController.GetAllStocks (OrderManagement.API)'
2025-08-17 21:27:01.653 +03:00 [INF] Route matched with {action = "GetAllStocks", controller = "Stock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStocks() on controller OrderManagement.API.Controller.StockController (OrderManagement.API).
2025-08-17 21:27:01.684 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:27:01.719 +03:00 [INF] Executed action OrderManagement.API.Controller.StockController.GetAllStocks (OrderManagement.API) in 56.192ms
2025-08-17 21:27:01.723 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.StockController.GetAllStocks (OrderManagement.API)'
2025-08-17 21:27:01.725 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7224/api/Stock/all - 200 null application/json; charset=utf-8 101.0688ms
2025-08-17 21:27:43.500 +03:00 [INF] Request starting HTTP/2 PUT https://localhost:7224/api/Stock/updateQuantity/3/20 - null 0
2025-08-17 21:27:43.519 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.StockController.UpdateStockQuantity (OrderManagement.API)'
2025-08-17 21:27:43.537 +03:00 [INF] Route matched with {action = "UpdateStockQuantity", controller = "Stock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] UpdateStockQuantity(Int32, Int32) on controller OrderManagement.API.Controller.StockController (OrderManagement.API).
2025-08-17 21:27:43.555 +03:00 [INF] Updating stock 3 quantity to 20
2025-08-17 21:27:43.588 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`1[[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:27:43.619 +03:00 [INF] Executed action OrderManagement.API.Controller.StockController.UpdateStockQuantity (OrderManagement.API) in 69.2884ms
2025-08-17 21:27:43.640 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.StockController.UpdateStockQuantity (OrderManagement.API)'
2025-08-17 21:27:43.643 +03:00 [INF] Request finished HTTP/2 PUT https://localhost:7224/api/Stock/updateQuantity/3/20 - 200 null application/json; charset=utf-8 143.5957ms
2025-08-17 21:27:48.640 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7224/api/Stock/all - null null
2025-08-17 21:27:48.653 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.StockController.GetAllStocks (OrderManagement.API)'
2025-08-17 21:27:48.655 +03:00 [INF] Route matched with {action = "GetAllStocks", controller = "Stock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllStocks() on controller OrderManagement.API.Controller.StockController (OrderManagement.API).
2025-08-17 21:27:48.682 +03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:27:48.687 +03:00 [INF] Executed action OrderManagement.API.Controller.StockController.GetAllStocks (OrderManagement.API) in 26.7276ms
2025-08-17 21:27:48.694 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.StockController.GetAllStocks (OrderManagement.API)'
2025-08-17 21:27:48.698 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7224/api/Stock/all - 200 null application/json; charset=utf-8 58.6619ms
2025-08-17 21:28:01.561 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7224/api/Stock/quantity/8 - null null
2025-08-17 21:28:01.604 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.StockController.GetStockQuantity (OrderManagement.API)'
2025-08-17 21:28:01.614 +03:00 [INF] Route matched with {action = "GetStockQuantity", controller = "Stock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStockQuantity(Int32) on controller OrderManagement.API.Controller.StockController (OrderManagement.API).
2025-08-17 21:28:01.640 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:28:01.654 +03:00 [INF] Executed action OrderManagement.API.Controller.StockController.GetStockQuantity (OrderManagement.API) in 35.3118ms
2025-08-17 21:28:01.661 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.StockController.GetStockQuantity (OrderManagement.API)'
2025-08-17 21:28:01.664 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7224/api/Stock/quantity/8 - 200 null application/json; charset=utf-8 103.7009ms
2025-08-17 21:29:09.718 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7224/api/OrderItem - application/json 127
2025-08-17 21:29:09.795 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.OrderItemController.AddOrderItem (OrderManagement.API)'
2025-08-17 21:29:09.809 +03:00 [INF] Route matched with {action = "AddOrderItem", controller = "OrderItem"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddOrderItem(OrderManagement.Domain.DTO.CreateOrderItemDTO) on controller OrderManagement.API.Controller.OrderItemController (OrderManagement.API).
2025-08-17 21:29:09.838 +03:00 [INF] Adding order item for OrderId: 5
2025-08-17 21:29:10.192 +03:00 [ERR] Failed to add order item for OrderId: 5
System.InvalidOperationException: Insufficient stock for the requested item.
   at OrderManagement.Persistence.Repositories.OrderItemRepository.AddOrderItemAsync(CreateOrderItemDTO dto, IDbTransaction transaction) in C:\Users\User\Downloads\OrderApp-main\OrderApp-main\OrderManagement.Persistence\Repositories\OrderItemRepository.cs:line 34
   at OrderManagement.Business.Services.OrderItemService.AddOrderItemAsync(CreateOrderItemDTO dto) in C:\Users\User\Downloads\OrderApp-main\OrderApp-main\OrderManagement.Business\Services\OrderItemService.cs:line 30
2025-08-17 21:29:10.311 +03:00 [INF] Executing BadRequestObjectResult, writing value of type 'OrderManagement.Domain.Common.Response`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:29:10.317 +03:00 [INF] Executed action OrderManagement.API.Controller.OrderItemController.AddOrderItem (OrderManagement.API) in 500.2983ms
2025-08-17 21:29:10.321 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.OrderItemController.AddOrderItem (OrderManagement.API)'
2025-08-17 21:29:10.324 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7224/api/OrderItem - 400 null application/json; charset=utf-8 606.555ms
2025-08-17 21:29:18.579 +03:00 [INF] Request starting HTTP/2 POST https://localhost:7224/api/OrderItem - application/json 126
2025-08-17 21:29:18.586 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.OrderItemController.AddOrderItem (OrderManagement.API)'
2025-08-17 21:29:18.594 +03:00 [INF] Route matched with {action = "AddOrderItem", controller = "OrderItem"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] AddOrderItem(OrderManagement.Domain.DTO.CreateOrderItemDTO) on controller OrderManagement.API.Controller.OrderItemController (OrderManagement.API).
2025-08-17 21:29:18.603 +03:00 [INF] Adding order item for OrderId: 5
2025-08-17 21:29:18.653 +03:00 [INF] Executing OkObjectResult, writing value of type 'OrderManagement.Domain.Common.Response`1[[System.Object, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:29:18.658 +03:00 [INF] Executed action OrderManagement.API.Controller.OrderItemController.AddOrderItem (OrderManagement.API) in 56.3467ms
2025-08-17 21:29:18.664 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.OrderItemController.AddOrderItem (OrderManagement.API)'
2025-08-17 21:29:18.667 +03:00 [INF] Request finished HTTP/2 POST https://localhost:7224/api/OrderItem - 200 null application/json; charset=utf-8 88.1235ms
2025-08-17 21:29:29.011 +03:00 [INF] Request starting HTTP/2 GET https://localhost:7224/api/Stock/quantity/8 - null null
2025-08-17 21:29:29.024 +03:00 [INF] Executing endpoint 'OrderManagement.API.Controller.StockController.GetStockQuantity (OrderManagement.API)'
2025-08-17 21:29:29.027 +03:00 [INF] Route matched with {action = "GetStockQuantity", controller = "Stock"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetStockQuantity(Int32) on controller OrderManagement.API.Controller.StockController (OrderManagement.API).
2025-08-17 21:29:29.035 +03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`2[[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Int32, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-08-17 21:29:29.038 +03:00 [INF] Executed action OrderManagement.API.Controller.StockController.GetStockQuantity (OrderManagement.API) in 5.0262ms
2025-08-17 21:29:29.041 +03:00 [INF] Executed endpoint 'OrderManagement.API.Controller.StockController.GetStockQuantity (OrderManagement.API)'
2025-08-17 21:29:29.044 +03:00 [INF] Request finished HTTP/2 GET https://localhost:7224/api/Stock/quantity/8 - 200 null application/json; charset=utf-8 33.5534ms
